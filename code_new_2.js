var $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document),listAnswer=[],listQuestion=[],tableSquare=$(".tableSquare"),listHtmls=[],newGameBtn=$(".newGame"),notification=$(".notification"),indexQuestion=0,countAsk=0,check=1,listFuct={displayNone:function(e){e.style.display="none"},displayBlock:function(e){e.style.display="block"},render:function(){listAnswer.forEach(function(e,n){var t="";t+=`\n                <tr class="rowTable">\n                <th><button class="askIndex">${n+1}</button></th> \n            `;for(var s=0;s<e.length;s++)t+='<td class="columTable">\n                <h1 class="contentSquare" ></h1>\n                </td> ';t+="</tr>",listHtmls.push(t)});const e=listHtmls.map(function(e,n){return`\n            ${e}\n            `});tableSquare.innerHTML=e.join(""),this.displayBlock($(".boxAnswer"))},takeFromFile:function(e){var n=[],t=[];fileLength=e.length;for(var s=0;s<fileLength;s++){if(!((i=e.indexOf("*Câu",s))>=0))break;n.push(i),s=i+1}for(s=0;s<fileLength;s++){var i;if(!((i=e.indexOf("*ĐS",s))>=0))break;t.push(i),s=i+1}if(n.length!=t.length)console.log("File Error!"),check=0,countAsk=0,notification.textContent="Invalid file";else{for(s=0;s<n.length;s++){listQuestion.push(e.slice(n[s]+5,t[s]));var o=e.slice(t[s]+4,fileLength);o=(o=o.replace(/\s+/g,"")).toUpperCase(),s!=n.length-1?listAnswer.push(e.slice(t[s]+4,n[s+1]).replace(/\s+/g,"").toUpperCase()):listAnswer.push(o)}check=1,countAsk=n.length}},nextAsk:function(){var e=$(".question").value,n=$(".answer").value;n=(n=n.replace(/\s+/g,"")).toUpperCase(n),""==e||""==n?notification.textContent=`Made ${countAsk}.\n                Please enter the full`:(notification.textContent="",listAnswer.push(n.toUpperCase()),listQuestion.push(e),$(".question").value="",$(".answer").value="",$(".question").focus(),countAsk++,notification.textContent=`Made ${countAsk}.`)},finish:function(e,n){e&&n>0?(this.render(),this.displayNone($(".renderGameWrap"))):notification.textContent=`Made ${countAsk}.\n            Please create a game`},newGame:function(){this.displayBlock($(".renderGameWrap")),listAnswer=[],listQuestion=[]},oneByOne:function(){this.displayNone($(".upFile")),this.displayNone($(".boxUploadFile")),this.displayBlock($(".ansques"));var e=$(".question").value,n=$(".answer").value;$(".question").focus(),$(".nextAsk").onclick=function(){listFuct.nextAsk(e,n)}},upFile:function(){this.displayNone($(".oneByOne")),this.displayNone($(".ansques")),this.displayBlock($(".boxUploadFile")),$(".boxUpload").focus()},chooseQues:function(){$$(".askIndex").forEach(function(e,n){e.onclick=function(){listFuct.displayBlock($(".showQuestion")),indexQuestion=n,$(".textShowQuestion").textContent=`Câu ${indexQuestion+1}. ${listQuestion[indexQuestion]}\n                 (có ${listAnswer[indexQuestion].length} kí tự)\n                `,$(".askIndexActivate")&&$(".askIndexActivate").classList.remove("askIndexActivate"),e.classList.add("askIndexActivate"),$(".inputAnswer").focus()}})},enterAns:function(e){e=(e=e.replace(/\s+/g,"")).toUpperCase();var n=$$(".rowTable");""!=e&&(e!=listAnswer[indexQuestion]?(n[indexQuestion].classList.add("rowTableFalse"),n[indexQuestion].classList.remove("rowTableTrue")):(n[indexQuestion].classList.add("rowTableTrue"),n[indexQuestion].classList.remove("rowTableFalse")),n[indexQuestion].querySelectorAll(".contentSquare").forEach(function(n,t){n.textContent=e[t]}),$(".inputAnswer").value="")},showAns:function(){$(".showAnswer").onclick=function(){listFuct.enterAns(listAnswer[indexQuestion])}},reset:function(){this.displayBlock($(".oneByOne")),this.displayBlock($(".upFile")),this.displayNone($(".renderGameWrap")),this.displayNone($(".ansques")),this.displayNone($(".boxUploadFile")),this.displayNone($(".boxAnswer")),$(".tableSquare").textContent="",$(".answer").value="",$(".question").value="",$(".boxUpload").value="",listHtmls=[],countAsk=0,indexQuestion=0,notification.textContent=`Made ${countAsk}.`,listQuestion=[],listAnswer=[],check=1,listFuct.displayNone($(".showQuestion")),$(".helpExtend").style.display="none"},narrow:function(){$(".creatGame").style.width="0",$(".showSquare").style.width="80%",$(".creatGame").style.padding="0",this.displayBlock($(".extendIcon"))},extend:function(){$(".creatGame").style.width="30%",$(".showSquare").style.width="60%",$(".creatGame").style.padding="0 2.5%",this.displayNone($(".extendIcon"))}},playFunc=function(){listFuct.reset(),newGameBtn.onclick=function(){listFuct.reset(),listFuct.newGame()},$(".oneByOne").onclick=function(){listFuct.oneByOne(),$(".nextAsk").onclick=function(){listFuct.nextAsk()},$(".finish").onclick=function(){check&&countAsk?(listFuct.render(),listFuct.chooseQues(),listFuct.showAns(),check=0):notification.textContent=`Made ${countAsk}.\n                Please create a game`}},$(".upFile").onclick=function(){listFuct.upFile(),$(".finish").onclick=function(){listFuct.takeFromFile($(".boxUpload").value),check&&countAsk?(notification.textContent=`Made ${countAsk}.`,listFuct.render(),console.log(listQuestion),console.log(listAnswer),listFuct.chooseQues(),listFuct.showAns(),$(".boxUpload").value="",check=0):notification.textContent=`Made ${countAsk}.\n                Please create a game`}},$(".btnAnswer").onclick=function(){listFuct.enterAns($(".inputAnswer").value)},$(".narrowIcon").onclick=function(){listFuct.narrow()},$(".extendIcon  ").onclick=function(){listFuct.extend()},$(".question").onkeyup=function(e){13==e.which&&$(".answer").focus()},$(".answer").onkeyup=function(e){13==e.which&&listFuct.nextAsk()},$(".inputAnswer").onkeyup=function(e){13==e.which&&listFuct.enterAns($(".inputAnswer").value)},$(".help").onclick=function(){"block"==$(".helpExtend").style.display?$(".helpExtend").style.display="none":$(".helpExtend").style.display="block"}};playFunc();